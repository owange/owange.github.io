<html>
<head>
  <title>记录</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/600753 (en-US, DDL); Windows/10.0.0 (Win64);"/>
  <meta name="content-class" content="yinxiang.markdown"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="1377"/>
<h1>记录</h1>

<div><span><div style="font-size: 14px; margin: 0; padding: 0; width: 100%;"><p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">sudo apt-get install python-spidev python3-spidev</p>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">git clone https://github.com/lthiery/SPI-Py.git</p>
<h1 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 41px; border-bottom: 3px double #999; color: #000; margin-top: 14px;">sqlite的C++API特征</h1>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">迭代器样式的查询接口
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333; margin-top: 0; margin-bottom: 0;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">不便于嵌套地查询，</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">利用json的键值做映射</li>
</ul>
</li>
</ul>
<h1 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 41px; border-bottom: 3px double #999; color: #000;">最佳实践补充</h1>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">
<p style="line-height: 160%; box-sizing: content-box; color: #333; margin: 0;">jetbrains ssh tool<br/>
零配置，非常好用，一定要使用</p>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333; margin-top: 0; margin-bottom: 0;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">例如使用SFTP：</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">使用时可以打开权限、日期等显示选项；</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">jetbrains ssh 乱码问题：需要设置Settings-Tools-SSH Terminal-Default encoding：utf-8（目标机编码格式）</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">缺点：不能快速定位，换用各自语言的IDE也只是提供了语法高亮；</li>
</ul>
</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">
<p style="line-height: 160%; box-sizing: content-box; color: #333; margin: 0;">项目文件编码问题：Settings-Editor-File encodings</p>
</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">
<p style="line-height: 160%; box-sizing: content-box; color: #333; margin: 0;">要确定好当前编辑文件QAQ</p>
</li>
</ul>
<h1 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 41px; border-bottom: 3px double #999; color: #000;">makefile文件的技巧汇总</h1>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">多文件</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">多路径</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">添加头文件 <code style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; color: #c1788b; padding: 4px 4px 2px 0; letter-spacing: -.3px;">-I</code></li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">添加链接库</li>
</ul>
<h1 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 41px; border-bottom: 3px double #999; color: #000;">20190622 ajax json接口定义原则</h1>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">应当以</li>
</ul>
<h1 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 41px; border-bottom: 3px double #999; color: #000;">20190622 如何‘双工’</h1>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">websocket</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">最终采用 AJAX，ajax是会等待handler的延时的
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333; margin-top: 0; margin-bottom: 0;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">轮询的意义？</li>
</ul>
</li>
</ul>
<h1 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 41px; border-bottom: 3px double #999; color: #000;">20190622 CGI调用驱动</h1>
<h2 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 34px; border-bottom: 1px solid #dbdbdb; color: #333;">ref</h2>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">受这个的启发：<a href="https://www.reddit.com/r/raspberry_pi/comments/3u2obi/questionccgiwiringpi_in_cgi/" style="line-height: 160%; box-sizing: content-box; text-decoration: underline; color: #5286bc;">[Question][C][CGI]WiringPi in CGI : raspberry_pi</a></li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">官方文档：<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">This function needs to be called with root privileges.</strong> <a href="http://wiringpi.com/reference/setup/" style="line-height: 160%; box-sizing: content-box; text-decoration: underline; color: #5286bc;">Setup | Wiring Pi</a></li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">其他：如果是创建文件、文件夹方面对root权限的需求，参考这个：<a href="https://www.cnblogs.com/inu1255/p/4154549.html" style="line-height: 160%; box-sizing: content-box; text-decoration: underline; color: #5286bc;">ubuntu下apache2的cgi-bin中以root权限运行程序 - inu1255 - 博客园</a></li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">关于树莓派GPIO的简单配置案例：<a href="https://blog.csdn.net/xukai871105/article/details/17881433" style="line-height: 160%; box-sizing: content-box; text-decoration: underline; color: #5286bc;">树莓派学习笔记——wiringPi GPIO使用详解 - 物联网 IoT 经验分享小站 - CSDN博客</a></li>
</ul>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">在命令行执行编译成功的CGI程序时，运行无误；<br/>
但在使用web界面上的元素来触发对CGI的调用时，发现程序停在<code style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; color: #c1788b; padding: 4px 4px 2px 0; letter-spacing: -.3px;">wiringPiSetup()</code>接口的初始化上；<br/>
查看apache日志<code style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; color: #c1788b; padding: 4px 4px 2px 0; letter-spacing: -.3px;">cat /var/log/apache2/error.log | tail</code><br/>
发现</p>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;">[Sat Jun <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">22</span> <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">23</span>:<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">20</span>:<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">53.809970</span> <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">2019</span>] [cgi:error] [pid <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">631</span>:tid <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">1852769328</span>] [client <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">169.254</span><span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">.216</span><span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">.81</span>:<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">64872</span>] AH01215: wiringPiSetup: Unable to open /dev/mem <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">or</span> /dev/gpiomem: Permission denied.: /var/www/cgi-bin/check/h_check.cgi, referer: http:<span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">//169.254.70.105/html/check.html</span>
[Sat Jun <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">22</span> <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">23</span>:<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">20</span>:<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">53.814974</span> <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">2019</span>] [cgi:error] [pid <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">631</span>:tid <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">1852769328</span>] [client <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">169.254</span><span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">.216</span><span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">.81</span>:<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">64872</span>] AH01215:   Aborting your program because <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">if</span> it can <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">not</span> access the GPIO: /var/www/cgi-bin/check/h_check.cgi, referer: http:<span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">//169.254.70.105/html/check.html</span>
[Sat Jun <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">22</span> <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">23</span>:<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">20</span>:<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">53.815178</span> <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">2019</span>] [cgi:error] [pid <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">631</span>:tid <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">1852769328</span>] [client <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">169.254</span><span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">.216</span><span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">.81</span>:<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">64872</span>] AH01215:   hardware then it most certianly won't work: /var/www/cgi-bin/check/h_check.cgi, referer: http:<span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">//169.254.70.105/html/check.html</span>
[Sat Jun <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">22</span> <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">23</span>:<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">20</span>:<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">53.815294</span> <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">2019</span>] [cgi:error] [pid <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">631</span>:tid <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">1852769328</span>] [client <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">169.254</span><span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">.216</span><span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">.81</span>:<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">64872</span>] AH01215:   Try running with sudo?: /var/www/cgi-bin/check/h_check.cgi, referer: http:<span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">//169.254.70.105/html/check.html</span>
</code></pre>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">尝试修改/dev/下的相关设备权限；</p>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;">pi@raspberrypi:/dev $ ls -ahl | grep &quot;gpio&quot;
crw-rw----   1 root gpio    254,   0 6月  22 12:33 gpiochip0
crw-rw----   1 root gpio    254,   1 6月  22 12:33 gpiochip1
crw-rw----   1 root gpio    247,   0 6月  22 12:33 gpiomem
pi@raspberrypi:/dev $ chmod 660 gpiomem
chmod: 更改'gpiomem' 的权限: 不允许的操作
pi@raspberrypi:/dev $ sudo chmod 660 gpiomem
pi@raspberrypi:/dev $ ls -ahl | grep &quot;gpio&quot;
crw-rw----   1 root gpio    254,   0 6月  22 12:33 gpiochip0
crw-rw----   1 root gpio    254,   1 6月  22 12:33 gpiochip1
crw-rw----   1 root gpio    247,   0 6月  22 12:33 gpiomem
pi@raspberrypi:/dev $ sudo chmod o+r gpiomem
pi@raspberrypi:/dev $ ls -ahl | grep &quot;gpio&quot;
crw-rw----   1 root gpio    254,   0 6月  22 12:33 gpiochip0
crw-rw----   1 root gpio    254,   1 6月  22 12:33 gpiochip1
crw-rw-r--   1 root gpio    247,   0 6月  22 12:33 gpiomem
pi@raspberrypi:/dev $ sudo chmod o+w gpiomem
pi@raspberrypi:/dev $ ls -ahl | grep &quot;gpio&quot;
crw-rw----   1 root gpio    254,   0 6月  22 12:33 gpiochip0
crw-rw----   1 root gpio    254,   1 6月  22 12:33 gpiochip1
crw-rw-rw-   1 root gpio    247,   0 6月  22 12:33 gpiomem
pi@raspberrypi:/dev $ ls -ahl | grep &quot;mem&quot;
crw-rw-rw-   1 root gpio    247,   0 6月  22 12:33 gpiomem
crw-r-----   1 root kmem      1,   1 6月  22 12:33 mem
crw-------   1 root root     10,  59 6月  22 12:33 memory_bandwidth
crw-------   1 root root    249,   0 6月  22 12:33 vc-mem
</code></pre>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">更改gpiomem后停在<code style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; color: #c1788b; padding: 4px 4px 2px 0; letter-spacing: -.3px;">wiringPiSPISetup(channel, speed);</code></p>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;">[Sat Jun <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">22</span> <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">23</span>:<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">27</span>:<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">27.348885</span> <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">2019</span>] [cgi:error] [pid <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">631</span>:tid <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">1810805808</span>] [client <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">169.254</span><span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">.216</span><span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">.81</span>:<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">49702</span>] AH01215: Unable to open SPI device: Permission denied: /var/www/cgi-bin/check/h_check.cgi, referer: http:<span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">//169.254.70.105/html/check.html</span>
</code></pre>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">更改spi设备权限</p>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;">pi@raspberrypi:/dev $ ls -ahl | grep <span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;spi&quot;</span>
crw-rw----   <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">1</span> root spi     <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">153</span>,   <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">0</span> <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">6</span>月  <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">22</span> <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">12</span>:<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">33</span> spidev0<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">.0</span>
crw-rw----   <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">1</span> root spi     <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">153</span>,   <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">1</span> <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">6</span>月  <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">22</span> <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">12</span>:<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">33</span> spidev0<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">.1</span>
pi@raspberrypi:/dev $ sudo chmod o+rw spidev0.*
pi@raspberrypi:/dev $ ls -ahl | grep <span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;spi&quot;</span>
crw-rw-rw-   <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">1</span> root spi     <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">153</span>,   <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">0</span> <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">6</span>月  <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">22</span> <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">12</span>:<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">33</span> spidev0<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">.0</span>
crw-rw-rw-   <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">1</span> root spi     <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">153</span>,   <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">1</span> <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">6</span>月  <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">22</span> <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">12</span>:<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">33</span> spidev0<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">.1</span>
pi@raspberrypi:/dev $
</code></pre>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">更改后可以运行</p>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">备注：</p>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">在设备重启后，权限会重置；</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">第二天写了一个脚本，保险起见加上了更多权限：</li>
</ul>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;">sudo chmod a+rw /dev/gpiomem 
sudo chmod a+rw /dev/spidev0.* 
sudo chmod a+rw /dev/mem
</code></pre>
</div><center style="display:none !important;visibility:collapse !important;height:0 !important;white-space:nowrap;width:100%;overflow:hidden">%0Asudo%20apt-get%20install%20python-spidev%20python3-spidev%0A%0A%0Agit%20clone%20https%3A%2F%2Fgithub.com%2Flthiery%2FSPI-Py.git%0A%0A%23%20sqlite%E7%9A%84C%2B%2BAPI%E7%89%B9%E5%BE%81%0A-%20%E8%BF%AD%E4%BB%A3%E5%99%A8%E6%A0%B7%E5%BC%8F%E7%9A%84%E6%9F%A5%E8%AF%A2%E6%8E%A5%E5%8F%A3%0A%20%20%20%20-%20%E4%B8%8D%E4%BE%BF%E4%BA%8E%E5%B5%8C%E5%A5%97%E5%9C%B0%E6%9F%A5%E8%AF%A2%EF%BC%8C%0A%20%20%20%20-%20%E5%88%A9%E7%94%A8json%E7%9A%84%E9%94%AE%E5%80%BC%E5%81%9A%E6%98%A0%E5%B0%84%0A%0A%23%20%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5%E8%A1%A5%E5%85%85%0A-%20jetbrains%20ssh%20tool%0A%20%20%20%20%E9%9B%B6%E9%85%8D%E7%BD%AE%EF%BC%8C%E9%9D%9E%E5%B8%B8%E5%A5%BD%E7%94%A8%EF%BC%8C%E4%B8%80%E5%AE%9A%E8%A6%81%E4%BD%BF%E7%94%A8%0A%20%20%20%20-%20%E4%BE%8B%E5%A6%82%E4%BD%BF%E7%94%A8SFTP%EF%BC%9A%0A%20%20%20%20-%20%E4%BD%BF%E7%94%A8%E6%97%B6%E5%8F%AF%E4%BB%A5%E6%89%93%E5%BC%80%E6%9D%83%E9%99%90%E3%80%81%E6%97%A5%E6%9C%9F%E7%AD%89%E6%98%BE%E7%A4%BA%E9%80%89%E9%A1%B9%EF%BC%9B%0A%20%20%20%20-%20jetbrains%20ssh%20%E4%B9%B1%E7%A0%81%E9%97%AE%E9%A2%98%EF%BC%9A%E9%9C%80%E8%A6%81%E8%AE%BE%E7%BD%AESettings-Tools-SSH%20Terminal-Default%20encoding%EF%BC%9Autf-8%EF%BC%88%E7%9B%AE%E6%A0%87%E6%9C%BA%E7%BC%96%E7%A0%81%E6%A0%BC%E5%BC%8F%EF%BC%89%0A%20%20%20%20-%20%E7%BC%BA%E7%82%B9%EF%BC%9A%E4%B8%8D%E8%83%BD%E5%BF%AB%E9%80%9F%E5%AE%9A%E4%BD%8D%EF%BC%8C%E6%8D%A2%E7%94%A8%E5%90%84%E8%87%AA%E8%AF%AD%E8%A8%80%E7%9A%84IDE%E4%B9%9F%E5%8F%AA%E6%98%AF%E6%8F%90%E4%BE%9B%E4%BA%86%E8%AF%AD%E6%B3%95%E9%AB%98%E4%BA%AE%EF%BC%9B%0A-%20%E9%A1%B9%E7%9B%AE%E6%96%87%E4%BB%B6%E7%BC%96%E7%A0%81%E9%97%AE%E9%A2%98%EF%BC%9ASettings-Editor-File%20encodings%0A%0A%0A-%20%E8%A6%81%E7%A1%AE%E5%AE%9A%E5%A5%BD%E5%BD%93%E5%89%8D%E7%BC%96%E8%BE%91%E6%96%87%E4%BB%B6QAQ%0A%0A%23%20makefile%E6%96%87%E4%BB%B6%E7%9A%84%E6%8A%80%E5%B7%A7%E6%B1%87%E6%80%BB%0A%0A-%20%E5%A4%9A%E6%96%87%E4%BB%B6%0A-%20%E5%A4%9A%E8%B7%AF%E5%BE%84%0A-%20%E6%B7%BB%E5%8A%A0%E5%A4%B4%E6%96%87%E4%BB%B6%20%60-I%60%0A-%20%E6%B7%BB%E5%8A%A0%E9%93%BE%E6%8E%A5%E5%BA%93%0A%0A%23%2020190622%20ajax%20json%E6%8E%A5%E5%8F%A3%E5%AE%9A%E4%B9%89%E5%8E%9F%E5%88%99%0A%0A-%20%E5%BA%94%E5%BD%93%E4%BB%A5%0A%0A%23%2020190622%20%E5%A6%82%E4%BD%95%E2%80%98%E5%8F%8C%E5%B7%A5%E2%80%99%0A-%20websocket%0A-%20%E6%9C%80%E7%BB%88%E9%87%87%E7%94%A8%20AJAX%EF%BC%8Cajax%E6%98%AF%E4%BC%9A%E7%AD%89%E5%BE%85handler%E7%9A%84%E5%BB%B6%E6%97%B6%E7%9A%84%0A%20%20%20%20-%20%E8%BD%AE%E8%AF%A2%E7%9A%84%E6%84%8F%E4%B9%89%EF%BC%9F%0A%0A%23%2020190622%20CGI%E8%B0%83%E7%94%A8%E9%A9%B1%E5%8A%A8%0A%0A%23%23%20ref%0A-%20%E5%8F%97%E8%BF%99%E4%B8%AA%E7%9A%84%E5%90%AF%E5%8F%91%EF%BC%9A%5B%5C%5BQuestion%5C%5D%5C%5BC%5C%5D%5C%5BCGI%5C%5DWiringPi%20in%20CGI%20%3A%20raspberry_pi%5D(https%3A%2F%2Fwww.reddit.com%2Fr%2Fraspberry_pi%2Fcomments%2F3u2obi%2Fquestionccgiwiringpi_in_cgi%2F)%0A-%20%E5%AE%98%E6%96%B9%E6%96%87%E6%A1%A3%EF%BC%9A**This%20function%20needs%20to%20be%20called%20with%20root%20privileges.**%20%5BSetup%20%7C%20Wiring%20Pi%5D(http%3A%2F%2Fwiringpi.com%2Freference%2Fsetup%2F)%0A-%20%E5%85%B6%E4%BB%96%EF%BC%9A%E5%A6%82%E6%9E%9C%E6%98%AF%E5%88%9B%E5%BB%BA%E6%96%87%E4%BB%B6%E3%80%81%E6%96%87%E4%BB%B6%E5%A4%B9%E6%96%B9%E9%9D%A2%E5%AF%B9root%E6%9D%83%E9%99%90%E7%9A%84%E9%9C%80%E6%B1%82%EF%BC%8C%E5%8F%82%E8%80%83%E8%BF%99%E4%B8%AA%EF%BC%9A%5Bubuntu%E4%B8%8Bapache2%E7%9A%84cgi-bin%E4%B8%AD%E4%BB%A5root%E6%9D%83%E9%99%90%E8%BF%90%E8%A1%8C%E7%A8%8B%E5%BA%8F%20-%20inu1255%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD%5D(https%3A%2F%2Fwww.cnblogs.com%2Finu1255%2Fp%2F4154549.html)%0A-%20%E5%85%B3%E4%BA%8E%E6%A0%91%E8%8E%93%E6%B4%BEGPIO%E7%9A%84%E7%AE%80%E5%8D%95%E9%85%8D%E7%BD%AE%E6%A1%88%E4%BE%8B%EF%BC%9A%5B%E6%A0%91%E8%8E%93%E6%B4%BE%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94wiringPi%20GPIO%E4%BD%BF%E7%94%A8%E8%AF%A6%E8%A7%A3%20-%20%E7%89%A9%E8%81%94%E7%BD%91%20IoT%20%E7%BB%8F%E9%AA%8C%E5%88%86%E4%BA%AB%E5%B0%8F%E7%AB%99%20-%20CSDN%E5%8D%9A%E5%AE%A2%5D(https%3A%2F%2Fblog.csdn.net%2Fxukai871105%2Farticle%2Fdetails%2F17881433)%0A%0A%E5%9C%A8%E5%91%BD%E4%BB%A4%E8%A1%8C%E6%89%A7%E8%A1%8C%E7%BC%96%E8%AF%91%E6%88%90%E5%8A%9F%E7%9A%84CGI%E7%A8%8B%E5%BA%8F%E6%97%B6%EF%BC%8C%E8%BF%90%E8%A1%8C%E6%97%A0%E8%AF%AF%EF%BC%9B%0A%E4%BD%86%E5%9C%A8%E4%BD%BF%E7%94%A8web%E7%95%8C%E9%9D%A2%E4%B8%8A%E7%9A%84%E5%85%83%E7%B4%A0%E6%9D%A5%E8%A7%A6%E5%8F%91%E5%AF%B9CGI%E7%9A%84%E8%B0%83%E7%94%A8%E6%97%B6%EF%BC%8C%E5%8F%91%E7%8E%B0%E7%A8%8B%E5%BA%8F%E5%81%9C%E5%9C%A8%60wiringPiSetup()%60%E6%8E%A5%E5%8F%A3%E7%9A%84%E5%88%9D%E5%A7%8B%E5%8C%96%E4%B8%8A%EF%BC%9B%0A%E6%9F%A5%E7%9C%8Bapache%E6%97%A5%E5%BF%97%60cat%20%2Fvar%2Flog%2Fapache2%2Ferror.log%20%7C%20tail%60%0A%E5%8F%91%E7%8E%B0%0A%60%60%60c%0A%5BSat%20Jun%2022%2023%3A20%3A53.809970%202019%5D%20%5Bcgi%3Aerror%5D%20%5Bpid%20631%3Atid%201852769328%5D%20%5Bclient%20169.254.216.81%3A64872%5D%20AH01215%3A%20wiringPiSetup%3A%20Unable%20to%20open%20%2Fdev%2Fmem%20or%20%2Fdev%2Fgpiomem%3A%20Permission%20denied.%3A%20%2Fvar%2Fwww%2Fcgi-bin%2Fcheck%2Fh_check.cgi%2C%20referer%3A%20http%3A%2F%2F169.254.70.105%2Fhtml%2Fcheck.html%0A%5BSat%20Jun%2022%2023%3A20%3A53.814974%202019%5D%20%5Bcgi%3Aerror%5D%20%5Bpid%20631%3Atid%201852769328%5D%20%5Bclient%20169.254.216.81%3A64872%5D%20AH01215%3A%20%20%20Aborting%20your%20program%20because%20if%20it%20can%20not%20access%20the%20GPIO%3A%20%2Fvar%2Fwww%2Fcgi-bin%2Fcheck%2Fh_check.cgi%2C%20referer%3A%20http%3A%2F%2F169.254.70.105%2Fhtml%2Fcheck.html%0A%5BSat%20Jun%2022%2023%3A20%3A53.815178%202019%5D%20%5Bcgi%3Aerror%5D%20%5Bpid%20631%3Atid%201852769328%5D%20%5Bclient%20169.254.216.81%3A64872%5D%20AH01215%3A%20%20%20hardware%20then%20it%20most%20certianly%20won't%20work%3A%20%2Fvar%2Fwww%2Fcgi-bin%2Fcheck%2Fh_check.cgi%2C%20referer%3A%20http%3A%2F%2F169.254.70.105%2Fhtml%2Fcheck.html%0A%5BSat%20Jun%2022%2023%3A20%3A53.815294%202019%5D%20%5Bcgi%3Aerror%5D%20%5Bpid%20631%3Atid%201852769328%5D%20%5Bclient%20169.254.216.81%3A64872%5D%20AH01215%3A%20%20%20Try%20running%20with%20sudo%3F%3A%20%2Fvar%2Fwww%2Fcgi-bin%2Fcheck%2Fh_check.cgi%2C%20referer%3A%20http%3A%2F%2F169.254.70.105%2Fhtml%2Fcheck.html%0A%60%60%60%0A%E5%B0%9D%E8%AF%95%E4%BF%AE%E6%94%B9%2Fdev%2F%E4%B8%8B%E7%9A%84%E7%9B%B8%E5%85%B3%E8%AE%BE%E5%A4%87%E6%9D%83%E9%99%90%EF%BC%9B%0A%60%60%60%0Api%40raspberrypi%3A%2Fdev%20%24%20ls%20-ahl%20%7C%20grep%20%22gpio%22%0Acrw-rw----%20%20%201%20root%20gpio%20%20%20%20254%2C%20%20%200%206%E6%9C%88%20%2022%2012%3A33%20gpiochip0%0Acrw-rw----%20%20%201%20root%20gpio%20%20%20%20254%2C%20%20%201%206%E6%9C%88%20%2022%2012%3A33%20gpiochip1%0Acrw-rw----%20%20%201%20root%20gpio%20%20%20%20247%2C%20%20%200%206%E6%9C%88%20%2022%2012%3A33%20gpiomem%0Api%40raspberrypi%3A%2Fdev%20%24%20chmod%20660%20gpiomem%0Achmod%3A%20%E6%9B%B4%E6%94%B9'gpiomem'%20%E7%9A%84%E6%9D%83%E9%99%90%3A%20%E4%B8%8D%E5%85%81%E8%AE%B8%E7%9A%84%E6%93%8D%E4%BD%9C%0Api%40raspberrypi%3A%2Fdev%20%24%20sudo%20chmod%20660%20gpiomem%0Api%40raspberrypi%3A%2Fdev%20%24%20ls%20-ahl%20%7C%20grep%20%22gpio%22%0Acrw-rw----%20%20%201%20root%20gpio%20%20%20%20254%2C%20%20%200%206%E6%9C%88%20%2022%2012%3A33%20gpiochip0%0Acrw-rw----%20%20%201%20root%20gpio%20%20%20%20254%2C%20%20%201%206%E6%9C%88%20%2022%2012%3A33%20gpiochip1%0Acrw-rw----%20%20%201%20root%20gpio%20%20%20%20247%2C%20%20%200%206%E6%9C%88%20%2022%2012%3A33%20gpiomem%0Api%40raspberrypi%3A%2Fdev%20%24%20sudo%20chmod%20o%2Br%20gpiomem%0Api%40raspberrypi%3A%2Fdev%20%24%20ls%20-ahl%20%7C%20grep%20%22gpio%22%0Acrw-rw----%20%20%201%20root%20gpio%20%20%20%20254%2C%20%20%200%206%E6%9C%88%20%2022%2012%3A33%20gpiochip0%0Acrw-rw----%20%20%201%20root%20gpio%20%20%20%20254%2C%20%20%201%206%E6%9C%88%20%2022%2012%3A33%20gpiochip1%0Acrw-rw-r--%20%20%201%20root%20gpio%20%20%20%20247%2C%20%20%200%206%E6%9C%88%20%2022%2012%3A33%20gpiomem%0Api%40raspberrypi%3A%2Fdev%20%24%20sudo%20chmod%20o%2Bw%20gpiomem%0Api%40raspberrypi%3A%2Fdev%20%24%20ls%20-ahl%20%7C%20grep%20%22gpio%22%0Acrw-rw----%20%20%201%20root%20gpio%20%20%20%20254%2C%20%20%200%206%E6%9C%88%20%2022%2012%3A33%20gpiochip0%0Acrw-rw----%20%20%201%20root%20gpio%20%20%20%20254%2C%20%20%201%206%E6%9C%88%20%2022%2012%3A33%20gpiochip1%0Acrw-rw-rw-%20%20%201%20root%20gpio%20%20%20%20247%2C%20%20%200%206%E6%9C%88%20%2022%2012%3A33%20gpiomem%0Api%40raspberrypi%3A%2Fdev%20%24%20ls%20-ahl%20%7C%20grep%20%22mem%22%0Acrw-rw-rw-%20%20%201%20root%20gpio%20%20%20%20247%2C%20%20%200%206%E6%9C%88%20%2022%2012%3A33%20gpiomem%0Acrw-r-----%20%20%201%20root%20kmem%20%20%20%20%20%201%2C%20%20%201%206%E6%9C%88%20%2022%2012%3A33%20mem%0Acrw-------%20%20%201%20root%20root%20%20%20%20%2010%2C%20%2059%206%E6%9C%88%20%2022%2012%3A33%20memory_bandwidth%0Acrw-------%20%20%201%20root%20root%20%20%20%20249%2C%20%20%200%206%E6%9C%88%20%2022%2012%3A33%20vc-mem%0A%60%60%60%0A%E6%9B%B4%E6%94%B9gpiomem%E5%90%8E%E5%81%9C%E5%9C%A8%60wiringPiSPISetup(channel%2C%20speed)%3B%60%0A%60%60%60c%0A%5BSat%20Jun%2022%2023%3A27%3A27.348885%202019%5D%20%5Bcgi%3Aerror%5D%20%5Bpid%20631%3Atid%201810805808%5D%20%5Bclient%20169.254.216.81%3A49702%5D%20AH01215%3A%20Unable%20to%20open%20SPI%20device%3A%20Permission%20denied%3A%20%2Fvar%2Fwww%2Fcgi-bin%2Fcheck%2Fh_check.cgi%2C%20referer%3A%20http%3A%2F%2F169.254.70.105%2Fhtml%2Fcheck.html%0A%60%60%60%0A%E6%9B%B4%E6%94%B9spi%E8%AE%BE%E5%A4%87%E6%9D%83%E9%99%90%0A%60%60%60c%0Api%40raspberrypi%3A%2Fdev%20%24%20ls%20-ahl%20%7C%20grep%20%22spi%22%0Acrw-rw----%20%20%201%20root%20spi%20%20%20%20%20153%2C%20%20%200%206%E6%9C%88%20%2022%2012%3A33%20spidev0.0%0Acrw-rw----%20%20%201%20root%20spi%20%20%20%20%20153%2C%20%20%201%206%E6%9C%88%20%2022%2012%3A33%20spidev0.1%0Api%40raspberrypi%3A%2Fdev%20%24%20sudo%20chmod%20o%2Brw%20spidev0.*%0Api%40raspberrypi%3A%2Fdev%20%24%20ls%20-ahl%20%7C%20grep%20%22spi%22%0Acrw-rw-rw-%20%20%201%20root%20spi%20%20%20%20%20153%2C%20%20%200%206%E6%9C%88%20%2022%2012%3A33%20spidev0.0%0Acrw-rw-rw-%20%20%201%20root%20spi%20%20%20%20%20153%2C%20%20%201%206%E6%9C%88%20%2022%2012%3A33%20spidev0.1%0Api%40raspberrypi%3A%2Fdev%20%24%0A%60%60%60%0A%E6%9B%B4%E6%94%B9%E5%90%8E%E5%8F%AF%E4%BB%A5%E8%BF%90%E8%A1%8C%0A%0A%E5%A4%87%E6%B3%A8%EF%BC%9A%0A-%20%E5%9C%A8%E8%AE%BE%E5%A4%87%E9%87%8D%E5%90%AF%E5%90%8E%EF%BC%8C%E6%9D%83%E9%99%90%E4%BC%9A%E9%87%8D%E7%BD%AE%EF%BC%9B%0A-%20%E7%AC%AC%E4%BA%8C%E5%A4%A9%E5%86%99%E4%BA%86%E4%B8%80%E4%B8%AA%E8%84%9A%E6%9C%AC%EF%BC%8C%E4%BF%9D%E9%99%A9%E8%B5%B7%E8%A7%81%E5%8A%A0%E4%B8%8A%E4%BA%86%E6%9B%B4%E5%A4%9A%E6%9D%83%E9%99%90%EF%BC%9A%0A%60%60%60bash%0Asudo%20chmod%20a%2Brw%20%2Fdev%2Fgpiomem%20%0Asudo%20chmod%20a%2Brw%20%2Fdev%2Fspidev0.*%20%0Asudo%20chmod%20a%2Brw%20%2Fdev%2Fmem%0A%60%60%60%0A%0A%0A</center></span>
</div></body></html> 